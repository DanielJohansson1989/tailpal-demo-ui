import React, { useState } from 'react';
import './App.css';
import TimeDisplay from './TimeDisplay';
import PawPrints from './PawPrints';
import { useSwipeable } from 'react-swipeable';

// Dummy data for animals' IDs and vaccination cards
const animals = [
  { id: 1, name: 'Dog', idView: 'Dog ID info', vaccineCard: 'Dog Vaccination Card' },
  { id: 2, name: 'Cat', idView: 'Cat ID info', vaccineCard: 'Cat Vaccination Card' },
  { id: 3, name: 'Rabbit', idView: 'Rabbit ID info', vaccineCard: 'Rabbit Vaccination Card' },
  { id: 4, name: 'Bird', idView: 'Bird ID info', vaccineCard: 'Bird Vaccination Card' },
  { id: 5, name: 'Fish', idView: 'Fish ID info', vaccineCard: 'Fish Vaccination Card' },
];

function App() {
  const [currentAnimalIndex, setCurrentAnimalIndex] = useState(0); // Current animal
  const [showVaccineCard, setShowVaccineCard] = useState(false); // Toggle between ID and vaccination card

  // Get the currently selected animal
  const currentAnimal = animals[currentAnimalIndex];

  // Handlers for swiping between animals
  const handlers = useSwipeable({
    onSwipedLeft: () => {
      if (currentAnimalIndex < animals.length - 1) {
        setCurrentAnimalIndex(currentAnimalIndex + 1); // Next animal
      }
    },
    onSwipedRight: () => {
      if (currentAnimalIndex > 0) {
        setCurrentAnimalIndex(currentAnimalIndex - 1); // Previous animal
      }
    },
    preventScrollOnSwipe: true, // Prevents page from scrolling during swipe
    trackMouse: true, // Enables mouse dragging for swipe functionality
  });

  // Toggle between ID and vaccination card
  const toggleView = () => setShowVaccineCard(!showVaccineCard);

  return (
    <div className="App" {...handlers}>
      <header className="App-header">
        <span>
          <img
            src="https://static.wixstatic.com/media/bb9651_c18982779dea4131bb1d1cd239a30924~mv2.png/v1/fill/w_80,h_80,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/TailPal_Black_green.png"
            className="tailpal-logo"
            alt="logo"
          />
        </span>
        <TimeDisplay />
        <span>
          <i className="fa-solid fa-bars" id="hamburgerIcon"></i>
        </span>
      </header>

      <main>
        <PawPrints />

        {/* Animal ID and vaccination card display */}
        <div className="animal-info">
          <h2>{currentAnimal.name}</h2>
          <div className="info-content">
            {showVaccineCard ? currentAnimal.vaccineCard : currentAnimal.idView}
          </div>
        </div>

        {/* Toggle switch to switch between ID and vaccination card */}
        <div className="toggle-container">
          <button onClick={toggleView}>
            {showVaccineCard ? 'Show ID' : 'Show Vaccination Card'}
          </button>
        </div>

        <footer>
          <p>Swipe or drag left/right to switch between animals</p>
        </footer>
      </main>
    </div>
  );
}

export default App;